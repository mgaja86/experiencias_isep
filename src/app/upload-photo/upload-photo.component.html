<div class="card">
  <h2 class="title">Comparte tu logro</h2>
  <p class="subtitle">Sube una fotograf√≠a presumiendo tu ingreso a la Universidad Isep.</p>

  <div class="form-group">
    <label for="name-input" class="form-label">Tu nombre completo</label>
    <input
      id="name-input"
      type="text"
      class="form-input"
      placeholder="Ej: Ana Sof√≠a P√©rez"
      [value]="userName()"
      (input)="userName.set($any($event.target).value)"
    >
  </div>

  <div class="form-group">
    <label for="program-input" class="form-label">Tu formaci√≥n</label>
    <input
      id="program-input"
      type="text"
      class="form-input"
      placeholder="Ej: M√°ster en Psicolog√≠a Cl√≠nica"
      [value]="programName()"
      (input)="programName.set($any($event.target).value)"
    >
  </div>

  <div
    class="dropzone"
    [class.dragging]="isDragging()"
    (drop)="onDrop($event)"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
  >
    <input id="file-input" type="file" accept="image/*" (change)="onFileChange($event)" hidden>
    <label for="file-input" class="picker">
      <div class="icon">üì∑</div>
      <div class="text">
        Arrastra y suelta tu imagen aqu√≠ o
        <span class="cta">explora tu dispositivo</span>
      </div>
      <div class="hint">Formatos admitidos: JPG, PNG, HEIC. Tama√±o recomendado: 5MB o menos.</div>
    </label>
  </div>

  @if (previewUrl) {
    <div class="preview">
      <img [src]="previewUrl!" alt="Vista previa de la imagen">
      <button type="button" class="remove" (click)="removeFile()">Quitar</button>
    </div>
  }

  <div class="actions">
    <button class="btn" [disabled]="!file || !userName().trim() || !programName().trim() || isUploading()" (click)="upload()">
      @if (isUploading()) { <span class="spinner"></span> Subiendo... }
      @else { Compartir foto }
    </button>
    @if (isUploading()) {
      <div class="progress">
        <div class="bar" [style.width.%]="progress()"></div>
      </div>
    }
  </div>
</div>

<app-toast
  [show]="toastVisible()"
  [message]="toastMessage()"
  [type]="toastType()"
  (closed)="onToastClosed()"
/>